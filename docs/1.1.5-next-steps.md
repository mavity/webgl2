# Plan: Implement `texParameteri` and `bufferSubData`

## Goal
Implement `texParameteri` and `bufferSubData` to expand the WebGL2 feature set.

## Steps

### 1. `texParameteri`
- **Rust (`src/webgl2_context.rs`)**:
    - Update `Texture` struct to store texture parameters:
        - `min_filter` (default: `NEAREST_MIPMAP_LINEAR` -> but for now maybe just `NEAREST` or `LINEAR` as we don't have mips)
        - `mag_filter` (default: `LINEAR`)
        - `wrap_s` (default: `REPEAT`)
        - `wrap_t` (default: `REPEAT`)
    - Implement `ctx_tex_parameter_i(ctx, target, pname, param)`.
        - Validate `target` (must be `TEXTURE_2D`).
        - Validate `pname` and `param`.
        - Update the bound texture's state.
- **Rust (`src/lib.rs`)**:
    - Export `wasm_ctx_tex_parameter_i`.
- **JS (`src/webgl2_context.js`)**:
    - Implement `texParameteri` to call the WASM function.
- **Test (`test/texParameteri.test.js`)**:
    - Update test to verify that `texParameteri` no longer throws and (ideally) updates state (though we can't easily check state without `getTexParameter`, which is also missing). We can at least check it doesn't crash.

### 2. `bufferSubData`
- **Rust (`src/webgl2_context.rs`)**:
    - Implement `ctx_buffer_sub_data(ctx, target, offset, ptr, len)`.
        - Validate `target` (must be bound buffer).
        - Validate `offset` and `len` against buffer size.
        - Copy data from WASM memory to the buffer's `data` vector.
- **Rust (`src/lib.rs`)**:
    - Export `wasm_ctx_buffer_sub_data`.
- **JS (`src/webgl2_context.js`)**:
    - Implement `bufferSubData` to allocate memory, copy data, call WASM, and free memory.
- **Test (`test/bufferSubData.test.js`)**:
    - Update test to verify `bufferSubData` works. We can verify this by using `getBufferSubData` (if it existed) or by drawing with the updated buffer. Since we have `drawArrays`, we might be able to verify it that way, or just trust the unit test logic within Rust if we add one.

## Future
- Implement `getTexParameter` to verify `texParameteri`.
- Implement `getBufferSubData` (or `getBufferParameter` which we have partially) to verify `bufferSubData`.
